#include <ultra64.h>

//data 
//D:80032320
u16 table_1[] = {
    0x8000,0x7EBA,0x7D74,0x7C2D,0x7AE7,0x79A0,0x7859,0x7711,0x75C9,0x7480,
    0x7337,0x71EC,0x70A1,0x6F55,0x6E07,0x6CB8,0x6B68,0x6A17,0x68C4,0x6770,
    0x661A,0x64C1,0x6367,0x620B,0x60AD,0x5F4C,0x5DE9,0x5C83,0x5B1A,0x59AE,
    0x583E,0x56CB,0x5555,0x53DB,0x525C,0x50D9,0x4F51,0x4DC5,0x4C32,0x4A9A,
    0x48FC,0x4757,0x45AB,0x43F7,0x423A,0x4075,0x3EA5,0x3CCB,0x3AE5,0x38F1,
    0x36EF,0x34DC,0x32B7,0x307D,0x2E2B,0x2BBD,0x292E,0x2678,0x2391,0x206C,
    0x1CF6,     0
};

//D:8003239C
u16 table_2[] = {
    0x1CF6,0x1CBB,0x1C80,0x1C45,0x1C08,0x1BCC,0x1B8F,0x1B51,0x1B13,0x1AD4,
    0x1A95,0x1A55,0x1A14,0x19D3,0x1992,0x194F,0x190C,0x18C9,0x1884,0x183F,
    0x17F9,0x17B3,0x176B,0x1723,0x16DA,0x1690,0x1645,0x15F9,0x15AC,0x155E,
    0x150F,0x14BE,0x146D,0x141A,0x13C6,0x1370,0x1319,0x12C1,0x1267,0x120B,
    0x11AD,0x114E,0x10EC,0x1088,0x1022, 0xFB9, 0xF4D, 0xEDE, 0xE6C, 0xDF7,
    0xD7D, 0xD00, 0xC7D, 0xBF4, 0xB66, 0xAD0, 0xA31, 0x989, 0x8D3, 0x80E,
    0x734, 0x63D, 0x518, 0x39A
};

//D:8003241C
u16 table_3[] = {
    0x39A, 0x31E, 0x28C, 0x1CD,     0,     0
};

static s32 sub_GAME_7F05AB70(s32 arg0)
{
    s32 mask;
    u16 *table;
    s32 shift;

    s32 first;
    s32 second;
    s32 dd;

    if (arg0 >= 0x7FE0)
    {
        mask = 7;
        shift = 3;
        table = &table_3;
        arg0 = arg0 - 0x7FE0;
    }
    else if (arg0 >= 0x7800)
    {
        mask = 0x1F;
        shift = 5;
        table = &table_2;
        arg0 = arg0 - 0x7800;
    }
    else
    {
        mask = 0x1FF;
        shift = 9;
        table = &table_1;
    }

    first = table[arg0 >> shift];
    second = table[(arg0 >> shift) + 1];
    dd = ((first - second) * (arg0 & mask)) >> shift;
    return first - dd;
}

u16 acos(s16 arg0)
{
    s32 phi_a0;

    if (arg0 >= 0)
    {
        phi_a0 = arg0;
    }
    else
    {
        phi_a0 = -arg0;
    }

    phi_a0 = sub_GAME_7F05AB70(phi_a0);

    if (arg0 < 0)
    {
        phi_a0 = 0xFFFF - phi_a0;
    }

    return (u16)phi_a0;
}

s16 asin(s16 arg0)
{
    s32 temp_v0;
    s32 phi_a0;

    if (arg0 >= 0)
    {
        phi_a0 = arg0;
    }
    else
    {
        phi_a0 = -arg0;
    }

    temp_v0 = sub_GAME_7F05AB70(phi_a0);

    if (arg0 >= 0)
    {
        phi_a0 = 0x7FFF - temp_v0;
    }
    else
    {
        phi_a0 = temp_v0 - 0x8000;
    }

    return (s16)phi_a0;
}
